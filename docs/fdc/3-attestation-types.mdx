---
title: Attestation Types
description: Learn about different attestation types supported by FDC.
keywords: [fdc, oracle, flare-data-connector, flare-network]
sidebar_position: 3
unlisted: true
---

FDC supports six attestation types out-of-the-box, including:

- [`AddressValidity`](#addressvalidity): Determines whether a given string represents a valid address on an external blockchain.

- [`BalanceDecreasingTransaction`](#balancedecreasingtransaction): Detects a transaction that either decreases the balance of a specified address.

- [`ConfirmedBlockHeightExists`](#confirmedblockheightexists): Verifies whether a block with the specified blockNumber is confirmed.

- [`EVMTransaction`](#evmtransaction): Fetches information about an EVM transaction, including details on associated events if specified.

- [`Payment`](#payment): Relays information about a transaction on an external chain that is classified as a native currency payment.

- [`ReferencedPaymentNonexistence`](#referencedpaymentnonexistence): Asserts that a payment agreed to be completed by a certain deadline, has not been made.

## `AddressValidity`

This function determines whether a given string represents a **valid address** on an external blockchain.

**Supported Chains**:

- `BTC` (Bitcoin)
- `DOGE` (Dogecoin)
- `XRP` (XRP Ledger)
- Test networks: `testBTC`, `testDOGE`, `testXRP`

### Request

| Field        | Solidity Type | Description                   |
| ------------ | ------------- | ----------------------------- |
| `addressStr` | `string`      | The address string to verify. |

### Response

| Field                 | Solidity Type | Description                                                                                     |
| --------------------- | ------------- | ----------------------------------------------------------------------------------------------- |
| `isValid`             | `bool`        | Indicates whether the provided address is valid.                                                |
| `standardAddress`     | `string`      | The standardized form of the validated address if `isValid`; otherwise, an empty string.        |
| `standardAddressHash` | `bytes32`     | The `keccak256` hash of the `standardAddress` if `isValid`; otherwise, a zero `bytes32` string. |

### Verification Process

The address is verified against the validity criteria specific to the chain identified by `sourceId`. If the address meets all criteria:

1. `isValid` is set to `true`.
2. The `standardAddress` and its `standardAddressHash` are computed.

If the address is invalid:

- `isValid` is set to `false`.
- Both `standardAddress` and `standardAddressHash` are returned as empty or zero values.

#### Chain-Specific Validation Criteria

- [Bitcoin (`Base58`)](/fdc/chain-configurations#bitcoin-base58)
- [Bitcoin (`Bech32`)](/fdc/chain-configurations#bitcoin-bech32)
- [Dogecoin (`Base58`)](/fdc/chain-configurations#dogecoin-base58)
- [XRPL (`Base58`)](/fdc/chain-configurations#xrpl-base58)

:::note[Lowest used timestamp]

For the `lowestUsedTimestamp` parameter, the value `0xffffffffffffffff` (equivalent to \(2^{64} - 1\) in hexadecimal) is used as the default.

:::

## `BalanceDecreasingTransaction`

This function detects a transaction that either **decreases the balance** of a specified address or is signed by the address itself.

A transaction is considered “balance decreasing” for the specified address if:

1. The balance **after the transaction** is lower than **before**.
2. The address is among the **signers** of the transaction (even if its balance is not reduced).

**Supported Chains**:

- `BTC` (Bitcoin)
- `DOGE` (Dogecoin)
- `XRP` (XRP Ledger)
- Test networks: `testBTC`, `testDOGE`, `testXRP`

### Request

| Field                    | Solidity Type | Description                                                     |
| ------------------------ | ------------- | --------------------------------------------------------------- |
| `transactionId`          | `bytes32`     | Unique ID of the transaction to be verified.                    |
| `sourceAddressIndicator` | `bytes32`     | Indicator of the address whose balance may have been decreased. |

### Response

| Field                      | Solidity Type | Description                                                            |
| -------------------------- | ------------- | ---------------------------------------------------------------------- |
| `blockNumber`              | `uint64`      | Block number containing the transaction.                               |
| `blockTimestamp`           | `uint64`      | Timestamp of the block containing the transaction.                     |
| `sourceAddressHash`        | `bytes32`     | Standard hash of the address indicated by `sourceAddressIndicator`.    |
| `spentAmount`              | `int256`      | Amount spent by the source address in minimal units (can be negative). |
| `standardPaymentReference` | `bytes32`     | Standardized payment reference of the transaction, if available.       |

### Verification Process

1. The transaction identified by `transactionId` is fetched from the **source blockchain node** or a relevant indexer.
2. If the transaction cannot be fetched or is in a block with insufficient [confirmations](/fdc/chain-configurations#finality), the attestation request is rejected.
3. Once the transaction is retrieved, the response fields are extracted if it qualifies as **balance decreasing** for the specified address.

The verification process is chain-specific, with details described below.

#### UTXO Chains (Bitcoin and Dogecoin)

- `sourceAddressIndicator`: Represents the index of the transaction input, formatted as a **0x-prefixed 32-byte string**.
  - If the specified input does not exist or lacks an associated address, the attestation request is rejected.
- `sourceAddress`: Address associated with the specified transaction input.
- `spentAmount`: Calculated as `Sum of all inputs with sourceAddress - Sum of all outputs with sourceAddress`. The value can be negative.
- `blockTimestamp`: Uses the **mediantime** of the block.

#### XRPL (XRP Ledger)

- `sourceAddressIndicator`: The [standard address hash](/fdc/chain-configurations#standard-address-hash) of the address in question.
  - If the indicated address is not among the transaction signers and its balance was not decreased, the attestation request is rejected.
- `spentAmount`: Difference between the balance **after** and **before** the transaction. Can be negative.
- `blockTimestamp`: Uses the **close_time** of the ledger, converted to Unix time.

:::note[Lowest used timestamp]

For the `lowestUsedTimestamp` parameter, the `blockTimestamp` of the transaction is used.

:::

## `ConfirmedBlockHeightExists`

This function verifies whether a block with the specified `blockNumber` is **confirmed**. It also provides data to compute the **block production rate** within a given time window.

**Supported Chains**:

- `BTC` (Bitcoin)
- `DOGE` (Dogecoin)
- `XRP` (XRP Ledger)
- Test networks: `testBTC`, `testDOGE`, `testXRP`

### Request

| Field         | Solidity Type | Description                                                          |
| ------------- | ------------- | -------------------------------------------------------------------- |
| `blockNumber` | `uint64`      | The block number to confirm.                                         |
| `queryWindow` | `uint64`      | The time period (in seconds) to calculate the block production rate. |

### Response

| Field                             | Solidity Type | Description                                                                                              |
| --------------------------------- | ------------- | -------------------------------------------------------------------------------------------------------- |
| `blockTimestamp`                  | `uint64`      | The timestamp of the block at `blockNumber`.                                                             |
| `numberOfConfirmations`           | `uint64`      | The required number of confirmations for the block to be considered confirmed (chain-specific).          |
| `lowestQueryWindowBlockNumber`    | `uint64`      | The block number of the latest block with a timestamp strictly less than `blockTimestamp - queryWindow`. |
| `lowestQueryWindowBlockTimestamp` | `uint64`      | The timestamp of the block at `lowestQueryWindowBlockNumber`.                                            |

### Verification Process

1. The function checks if the block with `blockNumber` is confirmed by at least the required `numberOfConfirmations` for the specified chain.
   - If the block does not meet this requirement, the request is rejected.
   - A block at the tip of the chain has exactly **1 confirmation**.
2. The lowestQueryWindowBlock` is identified, and its block number and timestamp are extracted.
3. The required confirmations are defined based on chain-specific [finality](/fdc/chain-configurations#finality).
4. The returned `timestamp` is:
   - `mediantime` for Bitcoin and Dogecoin.
   - `close_time` for XRPL.

:::note[Lowest used timestamp]

For the `lowestUsedTimestamp` parameter, the value of `lowestQueryWindowBlockTimestamp` is used.

:::

## `EVMTransaction`

This function fetches and relays information about an Ethereum Virtual Machine (EVM) transaction, including details on associated events if specified.

**Supported Chains**:

- `ETH` (Ethereum)
- `FLR` (Flare Mainnet)
- Test networks: `testETH` (Ethereum Sepolia), `testFLR` (Flare Testnet Coston2)

### Request

| Field                   | Solidity Type | Description                                                                                                                                                                                                                                                     |
| ----------------------- | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `transactionHash`       | `bytes32`     | The hash of the transaction to be verified.                                                                                                                                                                                                                     |
| `requiredConfirmations` | `uint16`      | The number of confirmations required for the block containing the transaction to be considered final by the requestor.                                                                                                                                          |
| `provideInput`          | `bool`        | If set to `true`, the `input` data field of the transaction will be included in the response.                                                                                                                                                                   |
| `listEvents`            | `bool`        | If `true`, events specified by `logIndices` will be included in the response. If `false`, no events are included.                                                                                                                                               |
| `logIndices`            | `uint32[]`    | A list of event indices (`logIndex`) to be relayed if `listEvents` is `true`. Should be sorted by the requestor. Maximum of 50 indices allowed. An empty list indicates all events up to a maximum of 50. If `listEvents` is `false`, this field must be empty. |

:::note[Using Event Logs Correctly]

- Events (logs) are indexed at the **block level**, not at the transaction level.
- The contract using this attestation should define the order of event logs, and the requestor should ensure `logIndices` are sorted according to these specifications.
- If possible, it is recommended that contracts require only a single `logIndex` to simplify processing.

:::

### Response

The response fields align with EVM's [JSON-RPC API](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_gettransactionbyhash):

| Field              | Solidity Type | Description                                                                                           |
| ------------------ | ------------- | ----------------------------------------------------------------------------------------------------- |
| `blockNumber`      | `uint64`      | The block number in which the transaction is included.                                                |
| `timestamp`        | `uint64`      | The timestamp of the block in which the transaction is included.                                      |
| `sourceAddress`    | `address`     | The address (`from`) that signed the transaction.                                                     |
| `isDeployment`     | `bool`        | Indicates whether the transaction is a contract creation (`true`) or a regular transaction (`false`). |
| `receivingAddress` | `address`     | The address (`to`) receiving the transaction. Zero address if `isDeployment` is `true`.               |
| `value`            | `uint256`     | The value transferred in the transaction, in wei.                                                     |
| `input`            | `bytes`       | Transaction input data if `provideInput` is `true`; otherwise, returns `0x00`.                        |
| `status`           | `uint8`       | Transaction status: `1` for success, `0` for failure.                                                 |
| `events`           | `Event[]`     | An array of requested events if `listEvents` is `true`; otherwise, an empty array.                    |

#### `Event` Struct

Each `Event` struct represents a log entry similar to EVM event logs:

| Field            | Solidity Type | Description                                                                                |
| ---------------- | ------------- | ------------------------------------------------------------------------------------------ |
| `logIndex`       | `uint32`      | The index of the event within the block.                                                   |
| `emitterAddress` | `address`     | The address of the contract that emitted the event.                                        |
| `topics`         | `bytes32[]`   | An array of up to four 32-byte strings representing indexed log arguments.                 |
| `data`           | `bytes`       | Non-indexed log data, concatenated as 32-byte strings. Must be at least 32 bytes long.     |
| `removed`        | `bool`        | `true` if the log was removed due to a chain reorganization; `false` if it is still valid. |

### Verification Process

1. The function checks if the transaction with the given `transactionHash` is included in a block on the **main chain** with at least the specified `requiredConfirmations`.
2. If the block has insufficient confirmations or if the transaction is not found, the request is rejected.
3. If `listEvents` is enabled and an event specified by `logIndices` does not exist, the request is also rejected.
4. The specified data (transaction details, input data, and events) is retrieved and relayed based on the request parameters.

:::note[Event handling]

- Ensure `logIndices` are sorted as required by the consuming contract.
- If `logIndices` is not empty while `listEvents` is set to `false`, the request will be rejected.
- Events are capped at a maximum of **50 entries** to optimize performance.

:::

## `Payment`

This attestation relays information about a transaction on an external chain that is classified as a **native currency payment**. Each supported blockchain specifies how a payment transaction should be formatted to be provable using this attestation type. These provable payments mimic traditional banking transactions where entity A sends a native currency to entity B, with an optional payment reference.

**Supported Chains**:

- `BTC` (Bitcoin)
- `DOGE` (Dogecoin)
- `XRP` (XRP Ledger)
- Test networks: `testBTC`, `testDOGE`, `testXRP`

### Request

| Field           | Solidity Type | Description                                                                                                                               |
| --------------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| `transactionId` | `bytes32`     | Unique ID of the payment transaction.                                                                                                     |
| `inUtxo`        | `uint256`     | For UTXO-based chains, this is the index of the transaction input associated with the source address. Set to `0` for non-UTXO chains.     |
| `utxo`          | `uint256`     | For UTXO-based chains, this is the index of the transaction output associated with the receiving address. Set to `0` for non-UTXO chains. |

### Response

| Field                          | Solidity Type | Description                                                                                                                    |
| ------------------------------ | ------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| `blockNumber`                  | `uint64`      | The block number in which the transaction is included.                                                                         |
| `blockTimestamp`               | `uint64`      | The timestamp of the block containing the transaction.                                                                         |
| `sourceAddressHash`            | `bytes32`     | Standardized address hash of the source address.                                                                               |
| `receivingAddressHash`         | `bytes32`     | Standardized address hash of the receiving address. Returns a zero 32-byte string if the transaction status is not successful. |
| `intendedReceivingAddressHash` | `bytes32`     | Standardized address hash of the intended receiving address if the transaction failed.                                         |
| `spentAmount`                  | `int256`      | Amount (in minimal units) spent by the source address.                                                                         |
| `intendedSpentAmount`          | `int256`      | Intended amount (in minimal units) to be spent by the source address, relevant if the transaction status is unsuccessful.      |
| `receivedAmount`               | `int256`      | Amount (in minimal units) received by the receiving address.                                                                   |
| `intendedReceivedAmount`       | `int256`      | Intended amount (in minimal units) to be received by the receiving address if the transaction failed.                          |
| `standardPaymentReference`     | `bytes32`     | [Standard payment reference](/fdc/chain-configurations#standard-payment-reference).                                            |
| `oneToOne`                     | `bool`        | Indicates if the transaction involves only one source and one receiver.                                                        |
| `status`                       | `uint8`       | [Transaction success status](/fdc/chain-configurations#transaction-success-status).                                            |

### Verification Process

1. The transaction identified by `transactionId` is fetched from the relevant blockchain node or indexer.
2. If the transaction cannot be retrieved or is in a block with insufficient [confirmations](/fdc/chain-configurations#finality), the attestation request is rejected.
3. Once the transaction data is fetched, a [payment summary](/fdc/chain-configurations#payment-summary) is computed according to the chain-specific rules.
   - If the payment summary is successfully generated, the response is populated using this data.
   - If the summary cannot be computed, the attestation request is rejected.
4. The fields `blockNumber` and `blockTimestamp` are extracted from the block data if they are not directly available in the transaction data.
   - For **Bitcoin** and **Dogecoin**, the `blockTimestamp` is derived from the **mediantime** of the block.
   - For **XRPL**, the `blockTimestamp` is derived from the **close time** of the ledger, converted to UNIX time.

:::note[Lowest used timestamp]

For the `lowestUsedTimestamp` parameter, the **`blockTimestamp`** of the transaction is used.

:::

## `ReferencedPaymentNonexistence`

This attestation asserts that a specific payment, agreed upon to be completed by a certain deadline, has **not been made**. If confirmed, it shows that no transaction meeting the specified criteria (address, amount, reference) was found within the given block range.

This attestation can be used, for example, to justify the liquidation of funds locked in a smart contract on Songbird if a payment is missed.

**Supported Chains**:

- `BTC` (Bitcoin)
- `DOGE` (Dogecoin)
- `XRP` (XRP Ledger)
- Test networks: `testBTC`, `testDOGE`, `testXRP`

### Request

| Field                      | Solidity Type | Description                                                                   |
| -------------------------- | ------------- | ----------------------------------------------------------------------------- |
| `minimalBlockNumber`       | `uint64`      | The block number to start the search range.                                   |
| `deadlineBlockNumber`      | `uint64`      | The block number to include as the end of the search range.                   |
| `deadlineTimestamp`        | `uint64`      | The timestamp to include as the end of the search range.                      |
| `destinationAddressHash`   | `bytes32`     | The standard hash of the address where the payment was expected.              |
| `amount`                   | `uint256`     | The required payment amount in minimal units.                                 |
| `standardPaymentReference` | `bytes32`     | The standard payment reference associated with the payment. Must not be zero. |

### Response

| Field                         | Solidity Type | Description                                                   |
| ----------------------------- | ------------- | ------------------------------------------------------------- |
| `minimalBlockTimestamp`       | `uint64`      | The timestamp of the block at `minimalBlockNumber`.           |
| `firstOverflowBlockNumber`    | `uint64`      | The block number immediately after the `deadlineBlockNumber`. |
| `firstOverflowBlockTimestamp` | `uint64`      | The timestamp of the `firstOverflowBlockNumber`.              |

- **`firstOverflowBlockNumber`**: This is the first block with a height greater than `deadlineBlockNumber` and a timestamp later than `deadlineTimestamp`.
- The search range includes blocks from `minimalBlockNumber` (inclusive) to `firstOverflowBlockNumber` (exclusive).

### Verification Process

1. **Block Confirmation**:

   - If the `firstOverflowBlock` cannot be determined or lacks the required [number of confirmations](/fdc/chain-configurations#finality), the request is rejected.
   - The request is also rejected if `firstOverflowBlockNumber` is less than or equal to `minimalBlockNumber`.

2. **Search Range**:

   - The search range includes blocks from `minimalBlockNumber` to `firstOverflowBlockNumber` (exclusive).
   - If the verifier does not have complete visibility of all blocks in this range, the request is rejected.

3. **Transaction Validation**:
   - The request is confirmed if **no transaction** meeting the specified criteria (address, amount, reference) is found within the specified block range.
   - The criteria and timestamp interpretation are specific to each chain.

The verification process is chain-specific, with details described below.

#### UTXO Chains (Bitcoin and Dogecoin)

- **Transaction Criteria**:
  - The transaction **must not be a coinbase transaction**.
  - The transaction must include the specified [standard payment reference](/fdc/chain-configurations#standard-payment-reference).
  - The sum of all output values sent to the specified address **minus** the sum of all input values from the same address must be **greater than the specified `amount`**.
    - Typically, the sum of input values for the specified address is zero.
- **Timestamp**: Uses the **mediantime** of the block.

#### Account-Based Chains (XRP Ledger)

- **Transaction Criteria**:
  - The transaction must be of type **Payment**.
  - The transaction must include the specified [standard payment reference](/fdc/chain-configurations#standard-payment-reference).
  - One of the following conditions must hold:
    - The transaction status is `SUCCESS` and the amount received by the specified address is greater than the specified `amount`.
    - The transaction status is `RECEIVER_FAILURE` and the specified address would have received an amount greater than the specified `amount` if the transaction had succeeded.
- **Timestamp**: Uses the **close_time** of the ledger, converted to UNIX time.

:::note[Lowest used timestamp]

For the `lowestUsedTimestamp` parameter, the value of `minimalBlockTimestamp` is used.

:::
