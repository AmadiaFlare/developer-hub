---
sidebar_position: 1
slug: deploy-fassets-bots
title: Deploy an FAssets Agent
description: Deploy and run FAssets agent
tags: [intermediate, fassets, bitcoin, dogecoin]
authors: [fassko]
keywords: [fassets, xrp, btc, doge flare-network, flare-network]
---

The FAssets system by Flare enables non-smart contract tokens like Bitcoin and XRP to interact trustlessly with smart contracts on the Flare network, unlocking their use in DeFi applications. It achieves this through collateralized minting, utilizing Flare's State Connector and Time Series Oracle for secure cross-chain functionality.

Agents in the FAssets system facilitate the minting and redemption of FAssets by providing over-collateralized assets and managing transactions securely. A liquidator in the FAssets system monitors agent's collateralization levels to ensure the system's security and trustlessness.

In this guide, you will learn the preferred methods for setting up and managing the FAssets agents using the frontend interface and running the liquidator bot.

## Prerequisites

### Hardware

The server should have a minimum of 2 CPUs and 4 GB of RAM and must operate on an AMD64 architecture running a Linux operating system.

### Software

Ensure you have installed Docker version 25.0.4 or higher and Docker Compose version v2.24.7 or higher.
Setting up and running the FAssets agent is accomplished by using Docker containers, so knowledge of Docker is essential.
Using Docker eliminates the need to manage tool versions and their compatibilities.

### Financials

To participate, ensure you meet the following minimum deposit requirements:

- **Songbird Tokens (SGB):** Deposit a minimum of 1,000 SGB into the `owner.native.address` specified in the `secrets.json` file.

- **XRP Tokens:** For XRP agents, you need to deposit 500 XRP Ledger native tokens (XRP) into the `owner.testXRP.address`.

- **Bitcoin (BTC):** Bitcoin agents should hold at least 0.005 BTC to cover potential high transaction fees in the `owner.testBTC.address`.

- **Dogecoin (DOGE):** Doge agents should maintain a minimum balance of 100 DOGE to cover potential high transaction fees in the `owner.testDOGE.address`.

Additionally, please ensure there is sufficient collateral for vault and pool requirements at the `owner.native.address`.

### Contract Addresses

These are important FAssets smart contract addresses representing test tokens and notable system components, provided for your convenience during the Open Beta on the Coston test network.

### Tokens

These are ERC-20 representations of test tokens to be used by the FAssets system.

|  **Token** | **Address**                                                                                                                              |
| ---------: | ---------------------------------------------------------------------------------------------------------------------------------------- |
| `testUSDC` | [`0xd20D9284E8b43C60365BcA90662C67B5A0B91dd6`](https://coston-explorer.flare.network/address/0xd20D9284E8b43C60365BcA90662C67B5A0B91dd6) |
| `testUSDT` | [`0x18bd7bE80F76055aeB4F1575A99d0c4d7893B8b5`](https://coston-explorer.flare.network/address/0x18bd7bE80F76055aeB4F1575A99d0c4d7893B8b5) |
|  `testETH` | [`0x17c3E6318cb45B4267998940d7D65BA95A32954F`](https://coston-explorer.flare.network/address/0x17c3E6318cb45B4267998940d7D65BA95A32954F) |

### FAssets System Contracts

|         **Contract** | **Address**                                                                                                                              | **Description**                                                                                                                          |
| -------------------: | ---------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| `AgentOwnerRegistry` | [`0x88278079a62db08fEb125f270102651BbE8F9984`](https://coston-explorer.flare.network/address/0x88278079a62db08fEb125f270102651BbE8F9984) | Manages agent whitelisting and allows setting and retrieving details such as work and management addresses, name, description, and icon. |
|           `FTestXRP` | [`0x5905Df703221d4Ea311E85edEa860734b2072C7d`](https://coston-explorer.flare.network/address/0x5905Df703221d4Ea311E85edEa860734b2072C7d) | The FAsset-wrapped TestXRP token, ready for use on Songbird Testnet Coston.                                                              |
|           `FTestBTC` | [`0xe01b2151b684b83C771449D8A6D1d1764f03829e`](https://coston-explorer.flare.network/token/0xe01b2151b684b83C771449D8A6D1d1764f03829e)   | The FAsset-wrapped TestBTC token, ready for use on Songbird Testnet Coston.                                                              |
|          `FTestDOGE` | [`0x353D20c6eB0C7bfcE3B828665C992DE995eF67bd`](https://coston-explorer.flare.network/token/0x353D20c6eB0C7bfcE3B828665C992DE995eF67bd)   | The FAsset-wrapped TestDOGE token, ready for use on Songbird Testnet Coston.                                                             |

## Setting Up

Follow these steps to set up the FAssets agent using Docker:

1. Clone the repository in your Linux server:

   ```bash
   git clone https://gitlab.com/flarenetwork/fasset-bots-deploy
   cd fasset-bots-deploy
   ```

2. Set up the environment file:

   ```bash
   cp .env.template .env
   ```

3. Set up the configuration file:

   ```bash
   cp config.json.template config.json
   ```

4. Login into GitHub Container Registry:

   ```bash
   docker login ghcr.io
   ```

5. Get the latest docker containers from the registry:

   ```bash
   docker compose pull
   ```

### Setting Environment Variables

To begin using the FAssets Docker infrastructure, you must configure the settings in the `.env` environment file.

- Make sure to set the machine address in the `.env` file using the `MACHINE_ADDRESS` variable.
- Set the database password `FASSET_DB_PASSWORD`.

:::warning
Once the database is created, the password will not change if you modify it in the `.env` file.
:::

#### Optional Settings

You can configure several optional settings in the `.env` environment file.

- Choose the profiles of the FAssets agent to run in `COMPOSE_PROFILES`, which by default include the FAssets agent bot, the agent user interface, and the liquidator bot.
- The frontend interface operates on the port designated as `FRONTEND_PORT`, which is set to `3000` by default.
- The link for the agent frontend user interface, referred to as `FRONTEND_URL`, is empty by default.
- The password for the agent frontend user interface is `FRONTEND_PASSWORD`.
- The backend port is `BACKEND_PORT`, which defaults to `4000`.
- The backend URL is `BACKEND_URL`, which defaults to `/fasset-backend`.

## Setting up Secret Keys

The FAsset agents require multiple keys for the Flare and underlying network chains, which must be generated to make the agent operational.

1. Create a new management wallet or use an existing one, preferably a cold wallet, as the management address for your agent.
2. Generate the secrets using this command by replacing the `MANAGEMENT_WALLET_ADDRESS` with your management wallet address:

   ```bash
   ./generateSecrets.sh MANAGEMENT_WALLET_ADDRESS
   ```

3. Copy the `secrets.new.json` to `secrets.json`:

   ```bash
   cp secrets.new.json secrets.json
   ```

4. Allow the user to read and write `secrets.json`:

   ```bash
   chmod 600 secrets.json
   ```

5. Set file ownership to user ID 1000, the default Linux user ID, for proper permissions:

   ```bash
   chown 1000:1000 secrets.json
   ```

6. Make a backup of the `secrets.json` file and store it securely.

### Set the Work Address

Configuring the native address links your agent's work address to the management address and grants access.

1. Navigate with the Songbird block explorer to the `AgentOwnerRegistry` smart contract on address [0x88278079a62db08fEb125f270102651BbE8F9984](https://coston-explorer.flare.network/address/0x88278079a62db08fEb125f270102651BbE8F9984/write-contract#address-tabs) and open the Write Contract tab.
2. Connect the management address wallet you used to generate the access keys above.
3. Register the work address by executing the `setWorkAddress` function with the value of `owner.native.address` from the `secrets.json` file.

## Configure the RPCs

In order to connect to various blockchains, you need to configure the Remote Procedure Call (RPC) configurations.

You can obtain the `xrp_rpc` for the XRP Ledger, `btc_rpc` for Bitcoin, and `doge_rpc` for Dogecoin from the Flare team, configured in the `secrets.json` file under the `apiKey` key.

## Configure the Server

Set up the FAssets backend and frontend access by configuring the NGINX server.

```plaintext
location /fasset-backend { # use BACKEND_URL
   rewrite /fasset-backend/(.*) /api/$1  break;
   proxy_set_header Host $http_host;
   proxy_pass         http://localhost:4000; # use BACKEND_PORT
}

location / { # use FRONTEND_URL
   proxy_set_header Host $http_host;
   proxy_pass         http://localhost:3000; # use FRONTEND_PORT
}
```

## Start the FAssets Agent

Start the FAssets agent using the Docker infrastructure by running the following command:

```bash
docker compose up -d
```

### Access Command line

To access the command line of the FAssets agent, run the following command:

```bash
docker compose exec app bash
```

### Update the FAssets Agent

To restart and update the FAssets agent, run the following commands:

```bash
docker compose down
git pull
docker compose pull
docker compose up -d
```

## Access the Agent Frontend

You can access the FAssets agent frontend user interface by navigating to the `FRONTEND_URL` in your browser.
You will be prompted to enter the password set in the `.env` file.
