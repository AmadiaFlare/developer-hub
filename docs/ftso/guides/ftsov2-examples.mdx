---
title: FTSO V2 Smart Contract Examples
tags: [advanced, ftso, solidity]
slug: ftso-v2-smart-contract-examples
description: Learn how to interact with the FTSO V2 using various Solidity smart contract examples.
keywords:
  [
    solidity,
    ftso,
    flare-time-series-oracle,
    flare-network,
    smart-contracts,
    flare,
    ethereum,
  ]
sidebar_position: 6
---

import Remix from "@site/src/components/remix";
import CodeBlock from "@theme/CodeBlock";
import FTSOV2FeedById from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2FeedById.sol";
import FTSOV2FeedByIdWei from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2FeedByIdWei.sol";
import FTSOVFeedByIndex from "!!raw-loader!/examples/developer-hub-solidity/FTSOVFeedByIndex.sol";
import FTSOVFeedByIndexWei from "!!raw-loader!/examples/developer-hub-solidity/FTSOVFeedByIndexWei.sol";
import FTSOV2FeedByIdIndex from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2FeedByIdIndex.sol";
import FTSOV2FeedsById from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2FeedsById.sol";
import FTSOV2FeedsByIdWei from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2FeedsByIdWei.sol";
import FTSOV2FeedsByIndex from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2FeedsByIndex.sol";
import FTSOV2FeedsByIndexWei from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2FeedsByIndexWei.sol";
import FTSOV2VerifyProof from "!!raw-loader!/examples/developer-hub-solidity/FTSOV2VerifyProof.sol";

## FTSOv2 Smart Contract Examples

In this section, you'll find Solidity code examples that demonstrate how to interact with the Flare Time Series Oracle (FTSO) Version 2. These examples cover a variety of scenarios, such as retrieving feed data, calculating fees, and verifying proofs. Each example explains the function being used and how it can be applied in a real-world contract.

### Overview

The Flare Time Series Oracle (FTSO) provides decentralized, real-time price information to smart contracts on the Flare network. FTSO V2 introduces several improvements over its predecessor, including more robust data feeds and enhanced security mechanisms.

The examples below demonstrate how to implement some key functions in your own Solidity contracts.

### Example 1: Get Feed by ID

This contract interacts with the Flare Network's FtsoV2Interface to fetch the current feed value for a specific cryptocurrency pair using its feed ID.

<CodeBlock language="solidity" title="FTSOV2FeedById.sol">
  {FTSOV2FeedById}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2FeedById.sol">Open in Remix</Remix>
<br></br>

### Example 2: Get Feed Value by ID in Wei

This example demonstrates how to retrieve the latest value of a feed, represented in Wei (the smallest unit of Ether), along with the timestamp of the last update. The contract also tracks and stores feed data by index, and keeps track of the feed with the highest value retrieved. Note: Because we use Wei, there are no need for decimal conversations.

<CodeBlock language="solidity" title="FTSOV2FeedByIdWei.sol">
  {FTSOV2FeedByIdWei}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2FeedByIdWei.sol">Open in Remix</Remix>
<br></br>

### Example 3: Get Feed By Index

This contract interacts with the Flare Network's FtsoV2Interface to fetch the current feed value for a specific feed by its index (in this case, an example feed at index 1, which could correspond to FLR/USD).

<CodeBlock language="solidity" title="FTSOVFeedByIndex.sol">
  {FTSOVFeedByIndex}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOVFeedByIndex.sol">Open in Remix</Remix>
<br></br>

### Example 4: Get Feed By Index in Wei

This contract not only retrieves feed values in wei and timestamps via the getFeedByIndexInWei function.

<CodeBlock language="solidity" title="FTSOVFeedByIndexWei.sol">
  {FTSOVFeedByIndexWei}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOVFeedByIndexWei.sol">Open in Remix</Remix>
<br></br>

### Example 5: Get Feed ID At A Given Index

This contract not only retrieves feed IDs via the getFeedId function from the FtsoV2Interface, but also introduces features for storing, tracking, and analyzing the feed usage, which can be useful for optimizing future queries.

<CodeBlock language="solidity" title="FTSOV2FeedByIdIndex.sol">
  {FTSOV2FeedByIdIndex}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2FeedByIdIndex.sol">Open in Remix</Remix>
<br></br>

### Example 6: Get Feeds By Id

This example smart contract queries the latest feed values for FLR/USD, BTC/USD, and ETH/USD from FTSOv2 on Flare Testnet Coston2.

<CodeBlock language="solidity" title="FTSOV2FeedsById.sol">
  {FTSOV2FeedsById}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2FeedsById.sol">Open in Remix</Remix>
<br></br>

### Example 7: Get Feeds By ID in Wei

This contract serves to retrieve the values of specified cryptocurrency feeds in wei, providing users with the latest market data while managing fees that may be associated with some feeds.

<CodeBlock language="solidity" title="FTSOV2FeedsByIdWei.sol">
  {FTSOV2FeedsByIdWei}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2FeedsByIdWei.sol">Open in Remix</Remix>
<br></br>

### Example 8: Get Feeds By Index

This contract enables users to retrieve stored data for multiple cryptocurrency feeds based on their indices, incorporating fee management and event logging for transparency.

<CodeBlock language="solidity" title="FTSOV2FeedsByIndex.sol">
  {FTSOV2FeedsByIndex}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2FeedsByIndex.sol">Open in Remix</Remix>
<br></br>

### Example 9: Get Feeds By Index in Wei

This contract retrieves values in wei for multiple cryptocurrency feeds based on their indices while managing associated fees.

<CodeBlock language="solidity" title="FTSOV2FeedsByIndexWei.sol">
  {FTSOV2FeedsByIndexWei}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2FeedsByIndexWei.sol">Open in Remix</Remix>
<br></br>

### Example 10: Verify Feed Data with Proof

This contract provides functionality to verify feed data against a Merkle tree proof, ensuring that the data has not been tampered with and is part of the confirmed data set.

<CodeBlock language="solidity" title="FTSOV2VerifyProof.sol">
  {FTSOV2VerifyProof}
</CodeBlock>

{/* prettier-ignore */}
<Remix fileName="FTSOV2VerifyProof.sol">Open in Remix</Remix>
<br></br>
